<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form action="#" method="POST" id="formCadastar">
        <input type="text" name="title" id="title"><br>
        <textarea name="body" id="body"></textarea><br>
        <input type="submit" value="Cadastrar" id="Cadastrar">

    </form>

    <script>
        document.querySelector("#formCadastar").addEventListener("submit",function(evento){
            evento.preventDefault()
            cadastrarPost(1)
        })

        let titleDom = document.getElementById('title').value
        let bodyDom = document.getElementById('body').value

        async function buscaPostUsuario(id){
            try {
                const resposta = await fetch(`https://jsonplaceholder.typicode.com/user/${id}/posts`)
                console.log(resposta)
                console.log(resposta.status)
                if (!resposta.ok){
                    throw Error("Erro na requisição")
                }
                const dados = await resposta.json()
                mostrarDados(dados)
            } catch (error) {
                alert(error)
            }
        }

        buscaPostUsuario(1)

        function mostrarDados(dados){
            console.log(dados)
        }

        async function cadastrarPost(userId) {
            try {
                const resposta = await fetch('https://jsonplaceholder.typicode.com/posts',{
                    method: 'POST',
                    body: JSON.stringify({
                        title: titleDom,
                        body: bodyDom,
                        userId
                    }),
                    headers:{
                        'Content-type': 'aplication/json; charset=UTF-8',
                    },
                })
                console.log(resposta)
                console.log(resposta.status)
                if (!resposta.ok){
                    throw Error("Erro na requisição")
                }
                const dados = await resposta.json()
                mostrarDados(dados)

            } catch (error) {
                alert("Erro:" + error)
            }
            
        }

    </script>
</body>
</html>